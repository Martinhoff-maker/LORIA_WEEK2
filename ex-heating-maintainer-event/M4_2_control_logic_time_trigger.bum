<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.comment="Copyright (c) 2019 LORIA&#10;   This program and the accompanying materials are made available under the&#10;   terms of the Eclipse Public License 2.0 which is available at&#10;   https://www.eclipse.org/legal/epl-2.0/&#10;   This Source Code may also be made available under the following Secondary&#10;   Licenses when the conditions for such availability set forth in the Eclipse&#10;   Public License, v. 2.0 are satisfied: GNU General Public License, version 3&#10;   which is available at https://www.gnu.org/licenses/gpl-3.0.txt&#10;   Contributers: Zheng CHENG, Dominique MERY&#10;   Notes: Time trigger design " org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1601824585992" org.eventb.texttools.text_representation="machine M4_2_control_logic_time_trigger&#10;/* Copyright (c) 2019 LORIA&#10;   This program and the accompanying materials are made available under the&#10;   terms of the Eclipse Public License 2.0 which is available at&#10;   https://www.eclipse.org/legal/epl-2.0/&#10;   This Source Code may also be made available under the following Secondary&#10;   Licenses when the conditions for such availability set forth in the Eclipse&#10;   Public License, v. 2.0 are satisfied: GNU General Public License, version 3&#10;   which is available at https://www.gnu.org/licenses/gpl-3.0.txt&#10;   Contributers: Zheng CHENG, Dominique MERY&#10;   Notes: Time trigger design */&#10; refines M4_1_control_logic_event_trigger  sees C4_control_logic&#10;&#10;variables T // continuous var temperature&#10;          now // continuous var time&#10;          s // system state&#10;          fa // predicted safe time series by the controller&#10;          q // discrete state&#10;          t0 // initial condition: time&#10;          T0 // initial condition: temperature&#10;          ta&#10;&#10;invariants&#10;  @type_T T∈Rpos→R&#10;  @type_now now∈Rpos&#10;  @type_s s∈sysSTATE&#10;  @type_fa fa ∈ Rpos → R&#10;  @type_q q∈ctrlSTATE&#10;  @type_t0 t0∈Rpos&#10;  @type_T0 T0∈R&#10;  @id_fa_on s = RUN ∧ q=ON ⇒ (fa = Ton(t0↦T0))&#10;  @id_fa_off s= RUN ∧ q=OFF ⇒ (fa = Toff(t0↦T0))&#10;  @id_fa_onoff s = RUN ∧ q=ONOFF ⇒ (fa = Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0)))&#10;  @id_fa_offon s= RUN ∧ q=OFFON ⇒  (fa = Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0)))&#10;  @id_Ton_now s = DECISION ∧ (q=ON) ⇒ (T(now) = Ton(t0↦T0)(now))&#10;  @id_Ton_now2 s = DECISION ∧ (q=OFFON) ⇒ (T(now) = Ton(t0↦T0)(now))&#10;  @id_Toff_now s= DECISION ∧ (q=OFF) ⇒ (T(now) = Toff(t0↦T0)(now))&#10;  @id_Toff_now2 s= DECISION ∧ (q=ONOFF) ⇒ (T(now) = Toff(t0↦T0)(now))&#10;  @id_Ton_tact s = DECISION ∧ (q=ON) ⇒ (T(now plus tact) = Ton(t0↦T0)(now plus tact))&#10;  @id_Toff_tact s= DECISION ∧ (q=OFF) ⇒ (T(now plus tact) = Toff(t0↦T0)(now plus tact))&#10;  @id_Ton_tact2 s = DECISION ∧ (q=OFFON) ⇒ (T(now plus tact) = Ton(t0↦T0)(now plus tact))&#10;  @id_Toff_tact2 s= DECISION ∧ (q=ONOFF) ⇒ (T(now plus tact) = Toff(t0↦T0)(now plus tact))&#10;  @safe_fa s = RUN ⇒   (∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒fa(t)∈closed(Tmin,Tmax))&#10;  theorem @safe_fa_deduced s = RUN ⇒ (∀t·t∈Rpos∧t∈openclosed(now, now plus ta)⇒fa(t)∈closed(Tmin,Tmax))&#10;  @safety00 (∀t·t∈Rpos∧t∈closed(zero, now plus tact)⇒T(t)∈closed(Tmin,Tmax))&#10;  @safety01 ∀t·t∈Rpos∧t∈closed(zero, now)⇒ T(t)∈closed(Tmin,Tmax)&#10;  @glue_ta ta = deltaT&#10;  theorem @thm_now_plus_type now plus tact∈Rpos&#10;  theorem @thm_now_plus_type2 now plus deltaT∈Rpos&#10;  theorem @thm_now_lt lt(now, now plus deltaT)&#10;  theorem @thm_now_lt01 lt(now,(now plus deltaT) plus tact)&#10;  theorem @thm_now_tact now plus tact∈Rpos&#10;  theorem @thm_now_delta_tact leq(now plus deltaT,(now plus deltaT) plus tact)&#10;  theorem @thm_now leq(zero,now)&#10;&#10;events&#10;  event INITIALISATION&#10;    then&#10;      @act1 T ≔  (λ t · t ∈ Rpos ∣ Tmin)   { zero plus tact ↦ Ton(zero↦Tmin)(zero plus tact)}&#10;      @act2 now ≔ zero&#10;      @act3 s ≔ DECISION&#10;      @act5 fa :∈ Rpos → R&#10;      @act6 q ≔ ON&#10;      @act7 t0≔zero&#10;      @act8 T0≔Tmin&#10;      @act9 ta≔deltaT&#10;  end&#10;&#10;  event Plant_ON refines Plant_ON&#10;    where&#10;      @grd1 s = RUN&#10;      @grd2 q = ON&#10;    then&#10;      @act1 now ≔ now plus deltaT&#10;      @act2 T ≔ (T   (lopen(now)◁ fa))&#10;      @act3 s ≔ DECISION&#10;  end&#10;&#10;  event Plant_OFF refines Plant_OFF&#10;    where&#10;      @grd1 s = RUN&#10;      @grd2 q = OFF&#10;    then&#10;      @act1 now ≔ now plus deltaT&#10;      @act2 T ≔ (T   (lopen(now)◁ fa))&#10;      @act3 s ≔ DECISION&#10;  end&#10;&#10;  event Plant_ONOFF refines Plant_ONOFF&#10;    where&#10;      @grd1 s = RUN&#10;      @grd2 q = ONOFF&#10;    then&#10;      @act1 now ≔ now plus deltaT&#10;      @act2 T ≔ (T   (lopen(now)◁ fa))&#10;      @act3 s ≔ DECISION&#10;      @act4 t0 ≔ now plus tact // shifting initial condition&#10;      @act5 T0 ≔ Ton(t0↦T0)(now plus tact) // shifting initial condition&#10;  end&#10;&#10;  event Plant_OFFON refines Plant_OFFON&#10;    where&#10;      @grd1 s = RUN&#10;      @grd2 q = OFFON&#10;    then&#10;      @act1 now ≔ now plus deltaT&#10;      @act2 T ≔ (T   (lopen(now)◁ fa))&#10;      @act3 s ≔ DECISION&#10;      @act4 t0 ≔ now plus tact // shifting initial condition&#10;      @act5 T0 ≔ Toff(t0↦T0)(now plus tact) // shifting initial condition&#10;  end&#10;&#10;  event Ctrl_ON_safe refines Ctrl_ON_safe&#10;    where&#10;      @grd1 s = DECISION&#10;      @grd2 q = ON ∨ q = OFFON&#10;      @grd3 leq(Ton(t0↦T0)((now plus deltaT) plus tact), Tmax)&#10;      theorem @grd4 (∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒Ton(t0↦T0)(t)∈closed(Tmin,Tmax))&#10;      /* stronger inv, need to prove for the rest&#10;         3 cases */&#10;    with&#10;      @fx fx = Ton(t0↦T0)&#10;      @tx tx = deltaT&#10;      @PREDICTION PREDICTION = Ton(t0↦T0)((now plus deltaT) plus tact) sub T(now)&#10;    then&#10;      @act1 s ≔ RUN&#10;      @act2 fa ≔ Ton(t0↦T0)&#10;      @act3 q ≔ ON&#10;  end&#10;&#10;  event Ctrl_ON_unsafe refines Ctrl_ON_unsafe&#10;    where&#10;      @grd1 s = DECISION&#10;      @grd2 q = ON ∨ q = OFFON&#10;      @grd3 gt(Ton(t0↦T0)((now plus deltaT) plus tact), Tmax)&#10;      theorem @grd4 (∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒(Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0)))(t)∈closed(Tmin,Tmax))&#10;    with&#10;      @fx fx = Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0))&#10;      @tx tx = deltaT&#10;      @PREDICTION PREDICTION = Ton(t0↦T0)((now plus deltaT) plus tact) sub T(now)&#10;    then&#10;      @act1 s ≔ RUN&#10;      @act2 fa ≔ Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0))&#10;      @act3 q ≔ ONOFF&#10;  end&#10;&#10;  event Ctrl_OFF_safe // Case 3: OFF or ONOFF mode, Toff(now+deltaT+tact) &gt;= Tmin, STAY OFF&#10;  refines Ctrl_OFF_safe&#10;    where&#10;      @grd1 s = DECISION&#10;      @grd2 q = OFF ∨ q = ONOFF&#10;      @grd3 leq(Tmin, Toff(t0↦T0)((now plus deltaT) plus tact))&#10;      theorem @grd4 (∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒ Toff(t0↦T0)(t)∈closed(Tmin,Tmax))&#10;    with&#10;      @fx fx = Toff(t0↦T0)&#10;      @tx tx = deltaT&#10;      @PREDICTION PREDICTION = Toff(t0↦T0)((now plus deltaT) plus tact) sub T(now)&#10;    then&#10;      @act1 s ≔ RUN&#10;      @act2 fa ≔ Toff(t0↦T0)&#10;      @act3 q ≔ OFF&#10;  end&#10;&#10;  event Ctrl_OFF_unsafe // Case 4: OFF or ONOFF mode, Toff(now+deltaT+tact) &lt; Tmin, SWITCH ON&#10;  refines Ctrl_OFF_unsafe&#10;    where&#10;      @grd1 s = DECISION&#10;      @grd2 q = OFF ∨ q = ONOFF&#10;      @grd3 gt(Tmin, Toff(t0↦T0)((now plus deltaT) plus tact))&#10;      theorem @grd4 (∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒(Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0)))(t)∈closed(Tmin,Tmax))&#10;    with&#10;      @fx fx = Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0))&#10;      @tx tx = deltaT&#10;      @PREDICTION PREDICTION = Toff(t0↦T0)((now plus deltaT) plus tact) sub T(now)&#10;    then&#10;      @act1 s ≔ RUN&#10;      @act2 fa ≔ Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0))&#10;      @act3 q ≔ OFFON&#10;  end&#10;end&#10;" version="5">
<org.eventb.core.refinesMachine name="_8Y-owOOuEeqGV8L4J4n50w" org.eventb.core.target="M4_1_control_logic_event_trigger"/>
<org.eventb.core.seesContext name="_ynkfYNMKEembo_88jyb-4Q" org.eventb.core.target="C4_control_logic"/>
<org.eventb.core.event name="'" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
<org.eventb.core.action name="_v2k-ctMKEembo_88jyb-4Q" org.eventb.core.assignment="T ≔  (λ t · t ∈ Rpos ∣ Tmin)   { zero plus tact ↦ Ton(zero↦Tmin)(zero plus tact)}" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_v2k-c9MKEembo_88jyb-4Q" org.eventb.core.assignment="now ≔ zero" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_v2k-dNMKEembo_88jyb-4Q" org.eventb.core.assignment="s ≔ DECISION" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.action name="_v2k-dtMKEembo_88jyb-4Q" org.eventb.core.assignment="fa :∈ Rpos → R" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
<org.eventb.core.action name="_v2k-d9MKEembo_88jyb-4Q" org.eventb.core.assignment="q ≔ ON" org.eventb.core.generated="false" org.eventb.core.label="act6"/>
<org.eventb.core.action name="_v2llgNMKEembo_88jyb-4Q" org.eventb.core.assignment="t0≔zero" org.eventb.core.generated="false" org.eventb.core.label="act7"/>
<org.eventb.core.action name="_v2llgdMKEembo_88jyb-4Q" org.eventb.core.assignment="T0≔Tmin" org.eventb.core.generated="false" org.eventb.core.label="act8"/>
<org.eventb.core.action name="_IKHK8ADvEeufnOcimimBrA" org.eventb.core.assignment="ta≔deltaT" org.eventb.core.generated="false" org.eventb.core.label="act9"/>
</org.eventb.core.event>
<org.eventb.core.variable name="_v2llgtMKEembo_88jyb-4Q" org.eventb.core.comment="continuous var temperature" org.eventb.core.generated="false" org.eventb.core.identifier="T"/>
<org.eventb.core.variable name="_v2llg9MKEembo_88jyb-4Q" org.eventb.core.comment="continuous var time" org.eventb.core.generated="false" org.eventb.core.identifier="now"/>
<org.eventb.core.variable name="_v2llhNMKEembo_88jyb-4Q" org.eventb.core.comment="system state" org.eventb.core.generated="false" org.eventb.core.identifier="s"/>
<org.eventb.core.variable name="_v2llhtMKEembo_88jyb-4Q" org.eventb.core.comment="predicted safe time series by the controller" org.eventb.core.generated="false" org.eventb.core.identifier="fa"/>
<org.eventb.core.variable name="_v2llh9MKEembo_88jyb-4Q" org.eventb.core.comment="discrete state" org.eventb.core.generated="false" org.eventb.core.identifier="q"/>
<org.eventb.core.variable name="_v2lliNMKEembo_88jyb-4Q" org.eventb.core.comment="initial condition: time" org.eventb.core.generated="false" org.eventb.core.identifier="t0"/>
<org.eventb.core.variable name="_v2llidMKEembo_88jyb-4Q" org.eventb.core.comment="initial condition: temperature" org.eventb.core.generated="false" org.eventb.core.identifier="T0"/>
<org.eventb.core.invariant name="_v2llitMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="type_T" org.eventb.core.predicate="T∈Rpos→R"/>
<org.eventb.core.invariant name="_v2lli9MKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="type_now" org.eventb.core.predicate="now∈Rpos"/>
<org.eventb.core.invariant name="_v2lljNMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="type_s" org.eventb.core.predicate="s∈sysSTATE"/>
<org.eventb.core.invariant name="_v2llj9MKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="type_fa" org.eventb.core.predicate="fa ∈ Rpos → R"/>
<org.eventb.core.invariant name="_v2mMkNMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="type_q" org.eventb.core.predicate="q∈ctrlSTATE"/>
<org.eventb.core.invariant name="_v2mMkdMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="type_t0" org.eventb.core.predicate="t0∈Rpos"/>
<org.eventb.core.invariant name="_v2mMktMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="type_T0" org.eventb.core.predicate="T0∈R"/>
<org.eventb.core.event name="_v2mMmNMKEembo_88jyb-4Q" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Plant_ON">
<org.eventb.core.refinesEvent name="_IKIZEADvEeufnOcimimBrA" org.eventb.core.target="Plant_ON"/>
<org.eventb.core.guard name="_v2mMmtMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = RUN"/>
<org.eventb.core.guard name="_v2mMm9MKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = ON"/>
<org.eventb.core.action name="_v2mMnNMKEembo_88jyb-4Q" org.eventb.core.assignment="now ≔ now plus deltaT" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_v2mMndMKEembo_88jyb-4Q" org.eventb.core.assignment="T ≔ (T   (lopen(now)◁ fa))" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_v2mMntMKEembo_88jyb-4Q" org.eventb.core.assignment="s ≔ DECISION" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_v2mzoNMKEembo_88jyb-4Q" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Plant_OFF">
<org.eventb.core.refinesEvent name="_IKJAIADvEeufnOcimimBrA" org.eventb.core.target="Plant_OFF"/>
<org.eventb.core.guard name="_v2mzotMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = RUN"/>
<org.eventb.core.guard name="_v2mzo9MKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = OFF"/>
<org.eventb.core.action name="_v2mzpNMKEembo_88jyb-4Q" org.eventb.core.assignment="now ≔ now plus deltaT" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_v2mzpdMKEembo_88jyb-4Q" org.eventb.core.assignment="T ≔ (T   (lopen(now)◁ fa))" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_v2mzptMKEembo_88jyb-4Q" org.eventb.core.assignment="s ≔ DECISION" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_ynkfYNMKEembo_88jyb-4S" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Plant_ONOFF">
<org.eventb.core.refinesEvent name="_IKJnMADvEeufnOcimimBrA" org.eventb.core.target="Plant_ONOFF"/>
<org.eventb.core.guard name="_v2mzqdMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = RUN"/>
<org.eventb.core.guard name="_v2mzqtMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = ONOFF"/>
<org.eventb.core.action name="_v2mzrtMKEembo_88jyb-4Q" org.eventb.core.assignment="now ≔ now plus deltaT" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_v2mzr9MKEembo_88jyb-4Q" org.eventb.core.assignment="T ≔ (T   (lopen(now)◁ fa))" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_v2mzsNMKEembo_88jyb-4Q" org.eventb.core.assignment="s ≔ DECISION" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.action name="_v2naudMKEembo_88jyb-4Q" org.eventb.core.assignment="t0 ≔ now plus tact" org.eventb.core.comment="shifting initial condition" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
<org.eventb.core.action name="_v2nautMKEembo_88jyb-4Q" org.eventb.core.assignment="T0 ≔ Ton(t0↦T0)(now plus tact)" org.eventb.core.comment="shifting initial condition" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
</org.eventb.core.event>
<org.eventb.core.event name="_ynkfYNMKEembo_88jyb-4R" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Plant_OFFON">
<org.eventb.core.refinesEvent name="_IKKOQADvEeufnOcimimBrA" org.eventb.core.target="Plant_OFFON"/>
<org.eventb.core.guard name="_v2nasdMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = RUN"/>
<org.eventb.core.guard name="_v2nastMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = OFFON"/>
<org.eventb.core.action name="_v2nattMKEembo_88jyb-4Q" org.eventb.core.assignment="now ≔ now plus deltaT" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_v2nat9MKEembo_88jyb-4Q" org.eventb.core.assignment="T ≔ (T   (lopen(now)◁ fa))" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_v2nauNMKEembo_88jyb-4Q" org.eventb.core.assignment="s ≔ DECISION" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.action name="_v2oBy9MKEembo_88jyb-4Q" org.eventb.core.assignment="t0 ≔ now plus tact" org.eventb.core.comment="shifting initial condition" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
<org.eventb.core.action name="_v2oBzNMKEembo_88jyb-4Q" org.eventb.core.assignment="T0 ≔ Toff(t0↦T0)(now plus tact)" org.eventb.core.comment="shifting initial condition" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
</org.eventb.core.event>
<org.eventb.core.event name="_v2mzp9MKEembo_88jyb-4Q" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Ctrl_ON_safe">
<org.eventb.core.refinesEvent name="_IKK1UADvEeufnOcimimBrA" org.eventb.core.target="Ctrl_ON_safe"/>
<org.eventb.core.guard name="_v2navtMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = DECISION"/>
<org.eventb.core.guard name="_v2nav9MKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = ON ∨ q = OFFON"/>
<org.eventb.core.guard name="_v2mzq9MKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="leq(Ton(t0↦T0)((now plus deltaT) plus tact), Tmax)"/>
<org.eventb.core.action name="_v2naw9MKEembo_88jyb-4Q" org.eventb.core.assignment="s ≔ RUN" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_IKMDcADvEeufnOcimimBrA" org.eventb.core.assignment="fa ≔ Ton(t0↦T0)" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_v2oBwNMKEembo_88jyb-4Q" org.eventb.core.assignment="q ≔ ON" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.guard name="_v2oBw9MKEembo_88jyb-4Q" org.eventb.core.comment="stronger inv, need to prove for the rest&#10;         3 cases " org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="(∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒Ton(t0↦T0)(t)∈closed(Tmin,Tmax))" org.eventb.core.theorem="true"/>
<org.eventb.core.witness name="_IKLcYADvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="fx" org.eventb.core.predicate="fx = Ton(t0↦T0)"/>
<org.eventb.core.witness name="_IKLcYQDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="tx" org.eventb.core.predicate="tx = deltaT"/>
<org.eventb.core.witness name="_IKLcYgDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="PREDICTION" org.eventb.core.predicate="PREDICTION = Ton(t0↦T0)((now plus deltaT) plus tact) sub T(now)"/>
</org.eventb.core.event>
<org.eventb.core.event name="_NlsHINMVEembo_88jyb-4Q" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Ctrl_ON_unsafe">
<org.eventb.core.refinesEvent name="_IKLcYwDvEeufnOcimimBrA" org.eventb.core.target="Ctrl_ON_unsafe"/>
<org.eventb.core.guard name="_WeDc4NM_Eemjpt_4877rBQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = DECISION"/>
<org.eventb.core.guard name="_WeED8NM_Eemjpt_4877rBQ" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = ON ∨ q = OFFON"/>
<org.eventb.core.guard name="_v2nas9MKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="gt(Ton(t0↦T0)((now plus deltaT) plus tact), Tmax)"/>
<org.eventb.core.action name="_v2oByNMKEembo_88jyb-4Q" org.eventb.core.assignment="s ≔ RUN" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_GS8EMAMvEeu8u6cRqHVE-w" org.eventb.core.assignment="fa ≔ Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0))" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_v2oBytMKEembo_88jyb-4Q" org.eventb.core.assignment="q ≔ ONOFF" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.witness name="_IKMDcQDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="fx" org.eventb.core.predicate="fx = Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0))"/>
<org.eventb.core.witness name="_IKMDcgDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="tx" org.eventb.core.predicate="tx = deltaT"/>
<org.eventb.core.witness name="_IKMDcwDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="PREDICTION" org.eventb.core.predicate="PREDICTION = Ton(t0↦T0)((now plus deltaT) plus tact) sub T(now)"/>
<org.eventb.core.guard name="_IKNRkgDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="(∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒(Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0)))(t)∈closed(Tmin,Tmax))" org.eventb.core.theorem="true"/>
</org.eventb.core.event>
<org.eventb.core.event name="_v2navNMKEembo_88jyb-4Q" org.eventb.core.comment="Case 3: OFF or ONOFF mode, Toff(now+deltaT+tact) &gt;= Tmin, STAY OFF" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Ctrl_OFF_safe">
<org.eventb.core.refinesEvent name="_IKMqgADvEeufnOcimimBrA" org.eventb.core.target="Ctrl_OFF_safe"/>
<org.eventb.core.guard name="_n0FUkNM_Eemjpt_4877rBQ" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = DECISION"/>
<org.eventb.core.guard name="_n0F7oNM_Eemjpt_4877rBQ" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = OFF ∨ q = ONOFF"/>
<org.eventb.core.guard name="_v2nawNMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="leq(Tmin, Toff(t0↦T0)((now plus deltaT) plus tact))"/>
<org.eventb.core.action name="_WeF5INM_Eemjpt_4877rBQ" org.eventb.core.assignment="s ≔ RUN" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_GS9SUAMvEeu8u6cRqHVE-w" org.eventb.core.assignment="fa ≔ Toff(t0↦T0)" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_WeC10NM_Eemjpt_4877rBQ" org.eventb.core.assignment="q ≔ OFF" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.witness name="_IKMqgQDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="fx" org.eventb.core.predicate="fx = Toff(t0↦T0)"/>
<org.eventb.core.witness name="_IKMqggDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="tx" org.eventb.core.predicate="tx = deltaT"/>
<org.eventb.core.witness name="_IKNRkADvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="PREDICTION" org.eventb.core.predicate="PREDICTION = Toff(t0↦T0)((now plus deltaT) plus tact) sub T(now)"/>
<org.eventb.core.guard name="_CnffcAMqEeu8u6cRqHVE-w" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="(∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒ Toff(t0↦T0)(t)∈closed(Tmin,Tmax))" org.eventb.core.theorem="true"/>
</org.eventb.core.event>
<org.eventb.core.event name="_v2oBwdMKEembo_88jyb-4Q" org.eventb.core.comment="Case 4: OFF or ONOFF mode, Toff(now+deltaT+tact) &lt; Tmin, SWITCH ON" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="Ctrl_OFF_unsafe">
<org.eventb.core.refinesEvent name="_IKNRkQDvEeufnOcimimBrA" org.eventb.core.target="Ctrl_OFF_unsafe"/>
<org.eventb.core.guard name="_CnffcQMqEeu8u6cRqHVE-w" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="s = DECISION"/>
<org.eventb.core.guard name="_v2oBxNMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="q = OFF ∨ q = ONOFF"/>
<org.eventb.core.guard name="_v2oBxdMKEembo_88jyb-4Q" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="gt(Tmin, Toff(t0↦T0)((now plus deltaT) plus tact))"/>
<org.eventb.core.action name="_n0IX4NM_Eemjpt_4877rBQ" org.eventb.core.assignment="s ≔ RUN" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_GS_HgAMvEeu8u6cRqHVE-w" org.eventb.core.assignment="fa ≔ Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0))" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_n0I-8NM_Eemjpt_4877rBQ" org.eventb.core.assignment="q ≔ OFFON" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.witness name="_IKN4oADvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="fx" org.eventb.core.predicate="fx = Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0))"/>
<org.eventb.core.witness name="_IKN4oQDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="tx" org.eventb.core.predicate="tx = deltaT"/>
<org.eventb.core.witness name="_IKN4ogDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="PREDICTION" org.eventb.core.predicate="PREDICTION = Toff(t0↦T0)((now plus deltaT) plus tact) sub T(now)"/>
<org.eventb.core.guard name="_CngtkAMqEeu8u6cRqHVE-w" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="(∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒(Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0)))(t)∈closed(Tmin,Tmax))" org.eventb.core.theorem="true"/>
</org.eventb.core.event>
<org.eventb.core.invariant name="_x_IZUAMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_fa_on" org.eventb.core.predicate="s = RUN ∧ q=ON ⇒ (fa = Ton(t0↦T0))"/>
<org.eventb.core.invariant name="_x_JAYAMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_fa_off" org.eventb.core.predicate="s= RUN ∧ q=OFF ⇒ (fa = Toff(t0↦T0))"/>
<org.eventb.core.invariant name="_x_JAYQMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_fa_onoff" org.eventb.core.predicate="s = RUN ∧ q=ONOFF ⇒ (fa = Toff(now plus tact↦Ton(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Ton(t0↦T0)))"/>
<org.eventb.core.invariant name="_x_JAYgMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_fa_offon" org.eventb.core.predicate="s= RUN ∧ q=OFFON ⇒  (fa = Ton(now plus tact↦Toff(t0↦T0)(now plus tact))  (openclosed(now, now plus tact)◁ Toff(t0↦T0)))"/>
<org.eventb.core.invariant name="_x_JAYwMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Ton_now" org.eventb.core.predicate="s = DECISION ∧ (q=ON) ⇒ (T(now) = Ton(t0↦T0)(now))"/>
<org.eventb.core.invariant name="_x_JAZAMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Ton_now2" org.eventb.core.predicate="s = DECISION ∧ (q=OFFON) ⇒ (T(now) = Ton(t0↦T0)(now))"/>
<org.eventb.core.invariant name="_x_JAZQMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Toff_now" org.eventb.core.predicate="s= DECISION ∧ (q=OFF) ⇒ (T(now) = Toff(t0↦T0)(now))"/>
<org.eventb.core.invariant name="_x_JncAMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Toff_now2" org.eventb.core.predicate="s= DECISION ∧ (q=ONOFF) ⇒ (T(now) = Toff(t0↦T0)(now))"/>
<org.eventb.core.invariant name="_x_JncQMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Ton_tact" org.eventb.core.predicate="s = DECISION ∧ (q=ON) ⇒ (T(now plus tact) = Ton(t0↦T0)(now plus tact))"/>
<org.eventb.core.invariant name="_x_JncgMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Toff_tact" org.eventb.core.predicate="s= DECISION ∧ (q=OFF) ⇒ (T(now plus tact) = Toff(t0↦T0)(now plus tact))"/>
<org.eventb.core.invariant name="_x_JncwMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Ton_tact2" org.eventb.core.predicate="s = DECISION ∧ (q=OFFON) ⇒ (T(now plus tact) = Ton(t0↦T0)(now plus tact))"/>
<org.eventb.core.invariant name="_x_JndAMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="id_Toff_tact2" org.eventb.core.predicate="s= DECISION ∧ (q=ONOFF) ⇒ (T(now plus tact) = Toff(t0↦T0)(now plus tact))"/>
<org.eventb.core.invariant name="_KH90UFbxEeqHB4nhpWsFsw" org.eventb.core.generated="false" org.eventb.core.label="safe_fa" org.eventb.core.predicate="s = RUN ⇒   (∀t·t∈Rpos∧t∈openclosed(now, (now plus deltaT) plus tact)⇒fa(t)∈closed(Tmin,Tmax))"/>
<org.eventb.core.invariant name="_-STbIAMZEeulJ4UmO9W4vg" org.eventb.core.generated="false" org.eventb.core.label="safe_fa_deduced" org.eventb.core.predicate="s = RUN ⇒ (∀t·t∈Rpos∧t∈openclosed(now, now plus ta)⇒fa(t)∈closed(Tmin,Tmax))" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_CClkIAWyEeuVzv8HJTThRQ" org.eventb.core.generated="false" org.eventb.core.label="safety00" org.eventb.core.predicate="(∀t·t∈Rpos∧t∈closed(zero, now plus tact)⇒T(t)∈closed(Tmin,Tmax))"/>
<org.eventb.core.invariant name="_zLSIMNQBEemDM5Iimbqbax" org.eventb.core.generated="false" org.eventb.core.label="safety01" org.eventb.core.predicate="∀t·t∈Rpos∧t∈closed(zero, now)⇒ T(t)∈closed(Tmin,Tmax)"/>
<org.eventb.core.variable name="_IKOfsADvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.identifier="ta"/>
<org.eventb.core.invariant name="_IKOfsQDvEeufnOcimimBrA" org.eventb.core.generated="false" org.eventb.core.label="glue_ta" org.eventb.core.predicate="ta = deltaT"/>
<org.eventb.core.invariant name="_ArKWoAMfEeu8u6cRqHVE-w" org.eventb.core.generated="false" org.eventb.core.label="thm_now_plus_type" org.eventb.core.predicate="now plus tact∈Rpos" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_ArK9sAMfEeu8u6cRqHVE-w" org.eventb.core.generated="false" org.eventb.core.label="thm_now_plus_type2" org.eventb.core.predicate="now plus deltaT∈Rpos" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_ArK9sQMfEeu8u6cRqHVE-w" org.eventb.core.generated="false" org.eventb.core.label="thm_now_lt" org.eventb.core.predicate="lt(now, now plus deltaT)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_ArK9sgMfEeu8u6cRqHVE-w" org.eventb.core.generated="false" org.eventb.core.label="thm_now_lt01" org.eventb.core.predicate="lt(now,(now plus deltaT) plus tact)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_q6cqAAPnEeu23NknIONwAw" org.eventb.core.generated="false" org.eventb.core.label="thm_now_tact" org.eventb.core.predicate="leq(zero,now plus tact)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_zLSIMNQBEemDM5Iimbqbay" org.eventb.core.generated="false" org.eventb.core.label="thm_now_delta_tact" org.eventb.core.predicate="leq(now plus deltaT,(now plus deltaT) plus tact)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_zLSIMNQBEemDM5Iimbqbaz" org.eventb.core.generated="false" org.eventb.core.label="thm_now" org.eventb.core.predicate="leq(zero,now)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_zLSIMNQBEemDM5Iimbqba|" org.eventb.core.label="thm_now_nowtact" org.eventb.core.predicate="leq(now,now plus tact)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_zLSIMNQBEemDM5Iimbqba{" org.eventb.core.label="thm_set_Rpos" org.eventb.core.predicate="openclosed(now,now plus tact)⊆Rpos" org.eventb.core.theorem="true"/>
</org.eventb.core.machineFile>
